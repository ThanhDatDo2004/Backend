üÜò NEED YOUR HELP TO DEBUG
===========================

CURRENT STATUS:
===============
‚úÖ Frontend showing bank info correctly
‚úÖ Backend code has been fixed multiple times
‚ùå Still getting 500 error on POST /api/shops/me/payout-requests

NEXT STEP:
==========
Test payout request and SHARE THE LOGS

HOW TO GET LOGS:
================

Option 1 (Easy): Run this command
   bash /Users/home/Downloads/tsNode-temp-master/GET_LOGS_NOW.sh

Option 2 (Manual): Open 2 terminals

Terminal 1 - Watch logs in real-time:
   tail -f /tmp/backend.log | grep -E "\[Payout"

Terminal 2 - Make the payout request:
   curl -X POST http://localhost:5050/api/shops/me/payout-requests \
     -H "Authorization: Bearer {your_token}" \
     -H "Content-Type: application/json" \
     -d '{
       "amount": 500,
       "password": "yourPassword",
       "note": "Test"
     }'

WHAT LOGS WILL SHOW:
====================

Expected logs:
[Payout Controller] Request data: {
  userId: 1,
  shopCode: 2,
  amount: 500,
  bank_id_from_request: undefined,
  bankId_final: 0,
  has_password: true
}

[Payout] Looking for DEFAULT account - shopCode: 2
[Payout] Bank query result: {
  query: "SELECT ShopBankID...",
  params: [2],
  rowCount: 1,
  data: { ShopBankID: 14, BankName: 'BIDV', ... }
}

‚úÖ 201 Created response

WHAT TO SHARE:
===============
Copy and paste:
1. The curl response (error message)
2. All logs showing [Payout Controller] and [Payout]
3. The exact request body you're sending

THEN:
======
I can see:
- What bank_id value is being sent
- Why the query is failing
- What the actual data is in database

LET'S FIX THIS! üöÄ

