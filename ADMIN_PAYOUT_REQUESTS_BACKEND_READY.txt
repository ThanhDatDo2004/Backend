✅ ADMIN PAYOUT REQUESTS - BACKEND COMPLETE
============================================

WHAT'S DONE:
============

✅ API Endpoints (Already Implemented):
  1. GET /api/admin/payout-requests
     - List all payout requests with filters
     - Query params: status, shop_code, limit, offset
     - Returns: Payout requests with bank info + shop info

  2. GET /api/admin/payout-requests/:payoutID
     - Get single payout request details
     - Returns: Full payout details with bank account info

  3. PATCH /api/admin/payout-requests/:payoutID/approve
     - Approve payout request
     - Body: { note?: string }
     - Action: Change status to 'paid'

  4. PATCH /api/admin/payout-requests/:payoutID/reject
     - Reject payout request
     - Body: { reason: string }
     - Action: Change status to 'rejected'

✅ Database Queries Updated:
  - listAllPayouts(): Added AccountHolder, IsDefault
  - getPayoutByID(): Added IsDefault
  - Both now return complete bank account info

✅ Response Data Includes:
  From Payout_Requests:
  - PayoutID, ShopCode, ShopBankID, Amount, Status
  - RequestedAt, ProcessedAt, TransactionCode
  - Note, RejectionReason

  From Shops:
  - ShopName, UserID

  From Users:
  - FullName

  From Shop_Bank_Accounts:
  - BankName, AccountNumber, AccountHolder, IsDefault ✅

API DOCUMENTATION:
===================

1️⃣ GET /api/admin/payout-requests
   Headers: Authorization: Bearer {token}
   Query Params:
     - status: "requested" | "paid" | "rejected"
     - shop_code: number
     - limit: 10 (default)
     - offset: 0 (default)

   Response (200 OK):
   {
     "success": true,
     "data": {
       "data": [
         {
           "PayoutID": 1,
           "ShopCode": 2,
           "ShopName": "Shop A",
           "Amount": 500,
           "Status": "requested",
           "BankName": "BIDV",
           "AccountNumber": "08668457999",
           "AccountHolder": "Thành Đạt Sport",
           "IsDefault": "Y",
           "RequestedAt": "2025-10-18T17:30:00Z",
           "CreateAt": "2025-10-18T17:30:00Z"
         }
       ],
       "pagination": {
         "limit": 10,
         "offset": 0,
         "total": 5
       }
     }
   }

2️⃣ GET /api/admin/payout-requests/:payoutID
   Response: Single payout with all details above

3️⃣ PATCH /api/admin/payout-requests/:payoutID/approve
   Body: { note: "Đã chuyển tiền vào tài khoản" }
   Action:
   - Update status to 'paid'
   - Update Wallet_Transactions status to 'completed'
   - Set ProcessedAt timestamp

4️⃣ PATCH /api/admin/payout-requests/:payoutID/reject
   Body: { reason: "Số tài khoản không hợp lệ" }
   Action:
   - Update status to 'rejected'
   - Set RejectionReason
   - Refund money back to wallet

FRONTEND INTEGRATION:
====================

✅ Frontend is ready with:
  - AdminPayoutRequestsPage component
  - API functions (getAdminPayoutRequestsApi, approvePayoutRequestApi, rejectPayoutRequestApi)
  - Status filter, statistics cards, approve/reject buttons
  - AdminPayoutRequestWithBank interface

✅ Backend provides all needed data in response:
  - Payout details
  - Bank account info (BankName, AccountNumber, AccountHolder, IsDefault)
  - Shop info
  - Status for filtering

ENDPOINTS READY:
================

GET /api/admin/payout-requests ✅
GET /api/admin/payout-requests/:payoutID ✅
PATCH /api/admin/payout-requests/:payoutID/approve ✅
PATCH /api/admin/payout-requests/:payoutID/reject ✅

All 4 endpoints working with complete data!

BACKEND STATUS: ✅ READY FOR FRONTEND INTEGRATION

